<!doctype html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>minify-sample</title>
	<script type="text/javascript" src="./minifyset.config.js"></script>
	<script type="text/javascript" src="./minifyset.loader.js"></script>
	<script>
	hljs.configure({
		tabReplace: '    ', // スペース4つ
	})
	hljs.initHighlightingOnLoad();
	</script>
</head>



<body>
<div class="container">
	<h5>■ minifysetの使い方</h5>
	<article>
		| minifysetの環境をつくる |
		<a href="./dir1">minify化する</a> |
		<a href="./dir1/dir2/">サンプルページ</a> |
		<a href="https://github.com/chaordicorg/minifyset/" target="_blank">ダウンロード</a> |
	</article>

	<main>

		<h1>概要と利点</h1>
		<article>
			<p>これは、JSやCSSファイルを圧縮して一つのファイルにまとめるためのセットです。</p>
			<p>この手のツールでは現在 webpack が主流ですが、node.js によるモダンな開発環境を構築しなければならず、また、設定も複雑なため敷居が高い。ごく普通のWEBページでも、ヘッダーにずらっとならんだJSライブラリやCSSファイルをひとまとめにして読み込めないかと思ってつくりました。圧縮化（minify化）はPHPのライブラリ <a href="https://github.com/matthiasmullie/minify" target="_blank">minify</a> を使っています。</p>
			<p>XAMPP や MAMP などのローカルサーバの開発環境を用意する必要があります。</p>
			<ul>
				<li>ファイルが圧縮され一つのファイルになるので、読み込み時間が軽減される。</li>
				<li>コメントが削除されるので、セキュリティ的な懸念が減る。</li>
				<li>開発時に、JSやCSSのファイルをいくらでも分割できる。</li>
			</li>
		</article>

		<h1>minifysetの環境をつくる</h1>

		<article>
			<div class="alert alert-success" role="alert">
				<p><strong>1： minifyset.config.js をつくります。</strong></p>
				・読み込むファイルとminify化したファイルの出力先を設定します。<br>
				・読み見込むファイルと同階層に置きます。<br>
				・同階層に複数設置したい場合は、ファイル名を minifyset.config.***.js のようにします。
			</div>
<pre><code>var _minconfig = {
	"set": [
		{
			// -- 読み込むCSSファイル
			"type": "css",
			"files":[
				"./common/css/common.css",
				"./assets/css/top.css",
				"./common/lib/bootstrap-4.5.3.css",
				"./common/lib/highlightjs-railscasts.min.css",
			],
			"minify": "./assets/css/top.min.css" // minify化したCSSファイルの出力先
		},
		{
			// -- 読み込むJSファイル
			"type": "js",
			"files":[
				"./common/lib/jquery-3.6.0.js",
				"./common/lib/bootstrap-4.5.3.js",
				"./common/lib/highlight.min.js",
				"./common/lib/jquery.clone_blocks.js",
				"./common/lib/jquery.inview.min.js",
				"assets/js/top.js",
			],
			"minify": "./assets/js/top.min.js"	// minify化したJSファイルの出力先
		}
	]
}
</code></pre>
		</article>

		<article>
			<div class="alert alert-success" role="alert">
				<p><strong>2：　_minifyset/ と minifyset.loader.js をコンテンツルートに置きます。</strong></p>
				_minifyset/ には、minify化を実行するファイルが入っています。<br>
				 minifyset.loader.js は minifyset.config.js で設定したファイルをHTMLファイルに読み込む処理をします。
			</div>
			<div class="alert alert-danger" role="alert">
				<strong>注意</strong>：　「_minifyset/」フォルダは、公開サーバーにアップロードしないでください。
			</div>
<pre><code>コンテンツ・ルート/
	├ _minifyset/ * minify化する実行ファイル群
	├ assets/
	│	├ css/
	│	|	└ top.css
	│	├ js/
	│		└ top.js
	└ common/
	index.html
	minifyset.config.js *
	minifyset.loader.js *
</code></pre>
		</article>

		<article>
			<div class="alert alert-success" role="alert">
				<strong>4</strong>：　対象のページに minifyset.config.js と minifyset.loader.js を読み込みます。
			</div>
<pre><code>&lt;script type="text/javascript" src="./minifyset.config.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="./minifyset.loader.js"&gt;&lt;/script&gt;
</code></pre>
		</article>

	</main>
</div>




<!--
<script>
// 特殊文字をエスケープせずにHTMLのソースコードをそのまま表示させる
// https://bit.ly/3kKtalN
document.querySelectorAll('pre > code').forEach(function(elem){
	elem.textContent = elem.innerHTML.trim();
});
</script>
-->



</body>



</html>